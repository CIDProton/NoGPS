# Simulator нюансы, ограничения и фишки

## Что важно для разработчиков
- Частота кадра зафиксирована через `Sleep(16)` (~60 FPS), но это не строгий real-time.
- Лидар: 100 лучей по кругу, дальность ограничена `CastRay` (100 единиц).
- Шум лидара — псевдослучайный, равномерный, до 3 единиц.
- Управление: `WASD` задаёт желаемую скорость, поверх накладывается `core.velocityCommand`.

## Почему так сделано
- Минимальная зависимость: никаких внешних графических библиотек, только WinAPI.
- Ядро изолировано от рендера, чтобы проще портировать/тестировать.
- Текущий рендер удобен для отладки логики, а не для финальной UX-визуализации.

## Что можно безопасно менять
- Геометрию карты в `initMap()`.
- Параметры лучей (`kNumRays`, шум, дальность).
- Масштаб и центр в `toCoreView(...)`.
- Цвета/толщины линий без влияния на логику ядра.

## Что менять осторожно
- Порядок update в симуляционном цикле: сначала пересчёт физики дрона, затем `core.update(...)`.
- Структуры `LidarPoint`, `Vec2`, `GraphNode`: это контракт между core и simulator.
